<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>My Awesome Project</title>
    <meta name="description" content="A VitePress Site">
    <meta name="generator" content="VitePress v1.3.4">
    <link rel="preload stylesheet" href="/assets/style.CnhwKTkT.css" as="style">
    
    <script type="module" src="/assets/app.szU31pNF.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.sbDcQiFc.js">
    <link rel="modulepreload" href="/assets/chunks/framework.Bt53DRYp.js">
    <link rel="modulepreload" href="/assets/Python_Python 快与慢.md.Dv7QvExC.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c8291ffa></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c8291ffa> Skip to content </a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle has-sidebar" data-v-9fd4d1dd data-v-0ad69264><a class="title" href="/" data-v-0ad69264><!--[--><!--]--><!----><span data-v-0ad69264>My Awesome Project</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-afb2845e data-v-08fbf4b6><!--[--><span data-v-08fbf4b6>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/README.html" tabindex="0" data-v-afb2845e data-v-08fbf4b6><!--[--><span data-v-08fbf4b6>Examples</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-358b6670><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-af5898d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-af5898d3><span class="vpi-more-horizontal icon" data-v-af5898d3></span></button><div class="menu" data-v-af5898d3><div class="VPMenu" data-v-af5898d3 data-v-20ed86d6><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-358b6670><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-883964e0><button data-v-883964e0>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-42c4c606><div class="curtain" data-v-42c4c606></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-42c4c606><span class="visually-hidden" id="sidebar-aria-label" data-v-42c4c606> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 has-active" data-v-51288d80 data-v-edd2eed8><div class="item" role="button" tabindex="0" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><h2 class="text" data-v-edd2eed8>Python</h2><!----></div><div class="items" data-v-edd2eed8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/Python/Python%202.x%20%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98%E7%BB%88%E6%9E%81%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Python 2.x 编码问题终极解决方案</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/Python/Python%20%E5%BF%AB%E4%B8%8E%E6%85%A2.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Python 快与慢</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/Python/Python%20%E7%B1%BB%E5%BA%93%E5%BC%95%E5%85%A5%E6%9C%BA%E5%88%B6.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Python 类库引入机制</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/Python/Python%20%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Python 学习指南</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/Python/Python%20%E5%93%B2%E5%AD%A6.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Python 哲学</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/Python/Python%20%E8%B5%84%E6%BA%90.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Python 资源</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0" data-v-51288d80 data-v-edd2eed8><!----><div class="items" data-v-edd2eed8><!--[--><div class="VPSidebarItem level-1" data-v-edd2eed8 data-v-edd2eed8><div class="item" role="button" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><p class="text" data-v-edd2eed8>软件</p><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _Python_Python%20%E5%BF%AB%E4%B8%8E%E6%85%A2" data-v-e6f2a212><div><p>% Python 快与慢</p><p>Python,速度</p><hr><p>#::Copyright</p><ul><li>作者 = xiaowang (<a href="mailto:xer345@126.com" target="_blank" rel="noreferrer">xer345@126.com</a>)</li><li>日期 = 2017-05-03</li><li>时间 = 2017-05-04 23:13:36 / None</li><li>链接 = <a href="http://onlookee.com/?c=Article&amp;a=view&amp;id=14" target="_blank" rel="noreferrer">Python 快与慢</a></li><li>版本 = 1.0</li><li>关于 = <a href="http://onlookee.com/" target="_blank" rel="noreferrer">ONLOOKEE.COM</a> 一直在分享有价值的软件/应用 、Python经验。</li></ul><p>#::文章信息</p><ul><li>类别 = Python</li><li>平台 = Windows,Mac,Linux</li><li>官网 = <a href="https://www.python.org/" target="_blank" rel="noreferrer">Welcome to Python.org</a></li></ul><p>#::截图照片</p><ul><li><img src="/assets/PythonSpeed.CTjQHSV3.png" alt="主界面"></li></ul><p>#::文章内容</p><ul><li><a href="#速度不再重要">速度不再重要</a></li><li><a href="#速度是唯一重要的东西">速度是唯一重要的东西</a></li><li><a href="#如果-cpu-时间是一个问题怎么办">如果 CPU 时间是一个问题怎么办？</a></li><li><a href="#那么python-更快一些吗">那么，Python 更快一些吗？</a></li><li><a href="#但是如果速度真的重要呢">但是如果速度真的重要呢？</a></li><li><a href="#优化-python">优化 Python</a></li></ul><blockquote><p>为牺牲性能追求生产率而呐喊</p></blockquote><p>人们对 Python 最大的抱怨之一就是它的速度比较慢，有些人甚至拒绝尝试使用 Python，因为它比其他语言速度慢。这里说说为什么我认为应该尝试使用 Python，尽管它是有点慢。</p><h3 id="速度不再重要" tabindex="-1">速度不再重要 <a class="header-anchor" href="#速度不再重要" aria-label="Permalink to &quot;速度不再重要&quot;">​</a></h3><p>过去的情形是，程序需要花费很长的时间来运行，CPU 比较贵，内存也很贵。程序的运行时间是一个很重要的指标。计算机非常的昂贵，计算机运行所需要的电也是相当贵的。对这些资源进行优化是因为一个永恒的商业法则：</p><blockquote><p>优化你最贵的资源。</p></blockquote><p>在过去，最贵的资源是计算机的运行时间。这就是导致计算机科学致力于研究不同算法的效率的原因。然而，这已经不再是正确的，因为现在硅芯片很便宜，确实很便宜。运行时间不再是你最贵的资源。公司最贵的资源现在是它的员工时间。或者换句话说，就是你。把事情做完比把它变快更加重要。实际上，这是相当的重要，我将把它再次放在这里，仿佛它是一个引文一样（给那些只是粗略浏览的人）:</p><blockquote><p>把事情做完比快速地做事更加重要。</p></blockquote><p>你可能会说：“我的公司在意速度，我开发一个 web 应用程序，那么所有的响应时间必须少于 x 毫秒。”或者，“我们失去了客户，因为他们认为我们的 app 运行太慢了。”我并不是想说速度一点也不重要，我只是想说速度不再是最重要的东西；它不再是你最贵的资源。</p><h3 id="速度是唯一重要的东西" tabindex="-1">速度是唯一重要的东西 <a class="header-anchor" href="#速度是唯一重要的东西" aria-label="Permalink to &quot;速度是唯一重要的东西&quot;">​</a></h3><p>当你在编程的背景下说『速度』时，你通常是说性能，也就是 CPU 周期。当你的 CEO 在编程的背景下说『速度』时，他指的是业务速度，最重要的指标是产品上市的时间。基本上，你的『产品/web 程序』是多么的快并不重要。它是用什么语言写的也不重要。甚至它需要花费多少钱也不重要。在一天结束时，让你的公司存活下来或者死去的唯一事物就是产品上市时间。我不只是说创业公司的想法 – 你开始赚钱需要花费多久，更多的是“从想法到客户手中”的时间期限。企业能够存活下来的唯一方法就是比你的竞争对手更快地创新。如果在你的产品上市之前，你的竞争对手已经提前上市了，那么你想出了多少好的主意也将不再重要。你必须第一个上市，或者至少能跟上。一但你放慢了脚步，你就输了。</p><blockquote><p>企业能够存活下来的唯一方法就是比你的竞争对手更快地创新。</p></blockquote><h4 id="一个微服务的案例" tabindex="-1">一个微服务的案例 <a class="header-anchor" href="#一个微服务的案例" aria-label="Permalink to &quot;一个微服务的案例&quot;">​</a></h4><p>像 Amazon、Google 和 Netflix 这样的公司明白快速前进的重要性。他们创建了一个业务系统，可以使用这个系统迅速地前进和快速的创新。微服务是针对他们的问题的解决方案。这篇文章不谈你是否应该使用微服务，但是至少要理解为什么 Amazon 和 Google 认为他们应该使用微服务。</p><p>微服务本来就很慢。微服务的主要概念是用网络调用来打破边界。这意味着你正在把使用的函数调用（几个 CPU 周期）转变为一个网络调用。没有什么比这更影响性能了。和 CPU 相比较，网络调用真的很慢。但是这些大公司仍然选择使用微服务。我所知道的架构里面没有比微服务还要慢的了。微服务最大的弊端就是它的性能，但是最大的长处就是上市的时间。通过在较小的项目和代码库上建立团队，一个公司能够以更快的速度进行迭代和创新。这恰恰表明了，非常大的公司也很在意上市时间，而不仅仅只是只有创业公司。</p><h4 id="cpu-不是你的瓶颈" tabindex="-1">CPU 不是你的瓶颈 <a class="header-anchor" href="#cpu-不是你的瓶颈" aria-label="Permalink to &quot;CPU 不是你的瓶颈&quot;">​</a></h4><p>如果你在写一个网络应用程序，如 web 服务器，很有可能的情况会是，CPU 时间并不是你的程序的瓶颈。当你的 web 服务器处理一个请求时，可能会进行几次网络调用，例如到数据库，或者像 Redis 这样的缓存服务器。虽然这些服务本身可能比较快速，但是对它们的网络调用却很慢。<a href="https://blog.codinghorror.com/the-infinite-space-between-words/" target="_blank" rel="noreferrer">这里有一篇很好的关于特定操作的速度差异的博客文章</a>。在这篇文章里，作者把 CPU 周期时间缩放到更容易理解的人类时间。如果一个单独的 CPU 周期等同于 1 秒，那么一个从 California 到 New York 的网络调用将相当于 4 年。那就说明了网络调用是多少的慢。按一些粗略估计，我们可以假设在同一数据中心内的普通网络调用大约需要 3 毫秒。这相当于我们“人类比例” 3 个月。现在假设你的程序是高 CPU 密集型，这需要 100000 个 CPU 周期来对单一调用进行响应。这相当于刚刚超过 1 天。现在让我们假设你使用的是一种要慢 5 倍的语言，这将需要大约 5 天。很好，将那与我们 3 个月的网络调用时间相比，4 天的差异就显得并不是很重要了。如果有人为了一个包裹不得不至少等待 3 个月，我不认为额外的 4 天对他们来说真的很重要。</p><p>上面所说的终极意思是，尽管 Python 速度慢，但是这并不重要。语言的速度（或者 CPU 时间）几乎从来不是问题。实际上谷歌曾经就这一概念做过一个研究，<a href="https://static.googleusercontent.com/media/research.google.com/en//archive/sawzall-sciprog.pdf" target="_blank" rel="noreferrer">并且他们就此发表过一篇论文</a>。那篇论文论述了设计高吞吐量的系统。在结论里，他们说到：</p><blockquote><p>在高吞吐量的环境中使用解释性语言似乎是矛盾的，但是我们已经发现 CPU 时间几乎不是限制因素；语言的表达性是指，大多数程序是源程序，同时它们的大多数时间花费在 I/O 读写和本机的运行时代码上。而且，解释性语言无论是在语言层面的轻松实验还是在允许我们在很多机器上探索分布计算的方法都是很有帮助的，</p></blockquote><p>再次强调：</p><blockquote><p>CPU 时间几乎不是限制因素。</p></blockquote><h3 id="如果-cpu-时间是一个问题怎么办" tabindex="-1">如果 CPU 时间是一个问题怎么办？ <a class="header-anchor" href="#如果-cpu-时间是一个问题怎么办" aria-label="Permalink to &quot;如果 CPU 时间是一个问题怎么办？&quot;">​</a></h3><p>你可能会说，“前面说的情况真是太好了，但是我们确实有过一些问题，这些问题中 CPU 成为了我们的瓶颈，并造成了我们的 web 应用的速度十分缓慢”，或者“在服务器上 X 语言比 Y 语言需要更少的硬件资源来运行。”这些都可能是对的。关于 web 服务器有这样的美妙的事情：你可以几乎无限地负载均衡它们。换句话说，可以在 web 服务器上投入更多的硬件。当然，Python 可能会比其他语言要求更好的硬件资源，比如 c 语言。只是把硬件投入在 CPU 问题上。相比于你的时间，硬件就显得非常的便宜了。如果你在一年内节省了两周的生产力时间，那将远远多于所增加的硬件开销的回报。</p><h3 id="那么-python-更快一些吗" tabindex="-1">那么，Python 更快一些吗？ <a class="header-anchor" href="#那么-python-更快一些吗" aria-label="Permalink to &quot;那么，Python 更快一些吗？&quot;">​</a></h3><p>这一篇文章里面，我一直在谈论最重要的是开发时间。所以问题依然存在：当就开发时间而言，Python 要比其他语言更快吗？按常规惯例来看，我、<a href="https://www.codefellows.org/blog/5-reasons-why-python-is-powerful-enough-for-google/" target="_blank" rel="noreferrer">google</a> <a href="https://www.lynda.com/Python-tutorials/Python-Programming-Efficiently/534425-2.html" target="_blank" rel="noreferrer">还有</a><a href="https://www.linuxjournal.com/article/3882" target="_blank" rel="noreferrer">其他</a><a href="https://www.codeschool.com/blog/2016/01/27/why-python/" target="_blank" rel="noreferrer">几个人</a>可以告诉你 Python 是多么的<a href="http://pythoncard.sourceforge.net/what_is_python.html" target="_blank" rel="noreferrer">高效</a>。它为你抽象出很多东西，帮助你关注那些你真正应该编写代码的地方，而不会被困在琐碎事情的杂草里，比如你是否应该使用一个向量或者一个数组。但你可能不喜欢只是听别人说的这些话，所以让我们来看一些更多的经验数据。</p><p>在大多数情况下，关于 Python 是否是更高效语言的争论可以归结为『脚本语言（或动态语言）』与『静态类型语言』两者的争论。我认为人们普遍接受的是静态类型语言的生产力较低，但是，<a href="http://www.tcl.tk/doc/scripting.html" target="_blank" rel="noreferrer">这有一篇优秀的论文</a>解释了为什么不是这样。就 Python 而言，这里有一项<a href="http://www.connellybarnes.com/documents/language_productivity.pdf" target="_blank" rel="noreferrer">研究</a>，它调查了不同语言编写字符串处理的代码所需要花费的时间，供参考。</p><p><img src="/assets/080132_78ON_2894582.BN13TMij.png" alt=""></p><p>在上述研究中，Python 的效率比 Java 高出 2 倍。有一些其他研究也显示相似的东西。 Rosetta Code 对编程语言的差异进行了<a href="https://arxiv.org/pdf/1409.0252.pdf" target="_blank" rel="noreferrer">深入的研究</a>。在论文中，他们把 Python 与其他脚本语言/解释性语言相比较，得出结论：</p><blockquote><p>Python 更简洁，即使与函数式语言相比较（平均要短 1.2 到 1.6 倍）</p></blockquote><p>普遍的趋势似乎是 Python 中的代码行总是更少。代码行听起来可能像一个可怕的指标，但是包括上面已经提到的两项研究在内的<a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.113.1831&amp;rep=rep1&amp;type=pdf" target="_blank" rel="noreferrer">多项研究</a>表明，每种语言中每行代码所需要花费的时间大约是一样的。因此，限制代码行数就可以提高生产效率。甚至 codinghorror（一名 C# 程序员）本人<a href="https://blog.codinghorror.com/are-all-programming-languages-the-same/" target="_blank" rel="noreferrer">写了一篇关于 Python 是如何更有效率的文章</a>。</p><p>我认为说 Python 比其他的很多语言更加的有效率是公正的。这主要是由于 Python 有大量的自带以及第三方库。<a href="https://www.python.org/doc/essays/comparisons/" target="_blank" rel="noreferrer">这里是一篇讨论 Python 和其他语言间的差异的简单的文章</a>。如果你不知道为何 Python 是如此的小巧和高效，我邀请你借此机会学习一点 Python，自己多实践。这儿是你的第一个程序：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import __hello__</span></span></code></pre></div><h3 id="但是如果速度真的重要呢" tabindex="-1">但是如果速度真的重要呢？ <a class="header-anchor" href="#但是如果速度真的重要呢" aria-label="Permalink to &quot;但是如果速度真的重要呢？&quot;">​</a></h3><p>上述论点的语气可能会让人觉得优化与速度一点也不重要。但事实是，很多时候运行时性能真的很重要。一个例子是，你有一个 web 应用程序，其中有一个特定的端点需要用很长的时间来响应。你知道这个程序需要多快，并且知道程序需要改进多少。</p><p>在我们的例子中，发生了两件事：</p><ol><li>我们注意到有一个端点执行缓慢。</li><li>我们承认它是缓慢，因为我们有一个可以衡量是否足够快的标准，而它没达到那个标准。</li></ol><p>我们不必在应用程序中微调优化所有内容，只需要让其中每一个都“足够快”。如果一个端点花费了几秒钟来响应，你的用户可能会注意到，但是，他们并不会注意到你将响应时间由 35 毫秒降低到 25 毫秒。“足够好”就是你需要做到的所有事情。免责声明：我应该说有一些应用程序，如实时投标程序，确实需要细微优化，每一毫秒都相当重要。但那只是例外，而不是规则。</p><p>为了明白如何对端点进行优化，你的第一步将是配置代码，并尝试找出瓶颈在哪。毕竟：</p><blockquote><p>任何除了瓶颈之外的改进都是错觉。<br> Any improvements made anywhere besides the bottleneck are an illusion. – Gene Kim</p></blockquote><p>如果你的优化没有触及到瓶颈，你只是浪费你的时间，并没有解决实际问题。在你优化瓶颈之前，你不会得到任何重要的改进。如果你在不知道瓶颈是什么前就尝试优化，那么你最终只会在部分代码中玩耍。在测量和确定瓶颈之前优化代码被称为“过早优化”。人们常提及 Donald Knuth 说的话，但他声称这句话实际上是他从别人那里听来的：</p><blockquote><p>过早优化是万恶之源<br> Premature optimization is the root of all evil。</p></blockquote><p>在谈到维护代码库时，来自 Donald Knuth 的更完整的引文是：</p><blockquote><p>在 97% 的时间里，我们应该忘记微不足道的效率：过早的优化是万恶之源。然而在关键的 3%，我们不应该错过优化的机会。 —— Donald Knuth</p></blockquote><p>换句话说，他所说的是，在大多数时间你应该忘记对你的代码进行优化。它几乎总是足够好。在不是足够好的情况下，我们通常只需要触及 3% 的代码路径。比如因为你使用了 if 语句而不是函数，你的端点快了几纳秒，但这并不会使你赢得任何奖项。</p><p>过早的优化包括调用某些更快的函数，或者甚至使用特定的数据结构，因为它通常更快。计算机科学认为，如果一个方法或者算法与另一个具有相同的渐近增长（或称为 Big-O），那么它们是等价的，即使在实践中要慢两倍。计算机是如此之快，算法随着数据/使用增加而造成的计算增长远远超过实际速度本身。换句话说，如果你有两个 O(log n) 的函数，但是一个要慢两倍，这实际上并不重要。随着数据规模的增大，它们都以同样的速度“慢下来”。这就是过早优化是万恶之源的原因；它浪费了我们的时间，几乎从来没有真正有助于我们的性能改进。</p><p>就 Big-O 而言，你可以认为对你的程序而言，所有的语言都是 O(n)，其中 n 是代码或者指令的行数。对于同样的指令，它们以同样的速率增长。对于渐进增长，一种语言的速度快慢并不重要，所有语言都是相同的。在这个逻辑下，你可以说，为你的应用程序选择一种语言仅仅是因为它的“快速”是过早优化的最终形式。你选择某些预期快速的东西，却没有测量，也不理解瓶颈将在哪里。</p><blockquote><p>为您的应用选择语言只是因为它的“快速”，是过早优化的最终形式。</p></blockquote><h3 id="优化-python" tabindex="-1">优化 Python <a class="header-anchor" href="#优化-python" aria-label="Permalink to &quot;优化 Python&quot;">​</a></h3><p>我最喜欢 Python 的一点是，它可以让你一次优化一点点代码。假设你有一个 Python 的方法，你发现它是你的瓶颈。你对它优化过几次，可能遵循<a href="https://wiki.python.org/moin/PythonSpeed" target="_blank" rel="noreferrer">这里</a>和<a href="https://wiki.python.org/moin/PythonSpeed/PerformanceTips" target="_blank" rel="noreferrer">那里</a>的一些指导，现在，你很肯定 Python 本身就是你的瓶颈。Python 有调用 C 代码的能力，这意味着，你可以用 C 重写这个方法来减少性能问题。你可以一次重写一个这样的方法。这个过程允许你用任何可以编译为 C 兼容汇编程序的语言，编写良好优化后的瓶颈方法。这让你能够在大多数时间使用 Python 编写，只在必要的时候都才用较低级的语言来写代码。</p><p>有一种叫做 Cython 的编程语言，它是 Python 的超集。它几乎是 Python 和 C 的合并，是一种渐进类型的语言。任何 Python 代码都是有效的 Cython 代码，Cython 代码可以编译成 C 代码。使用 Cython，你可以编写一个模块或者一个方法，并逐渐进步到越来越多的 C 类型和性能。你可以将 C 类型和 Python 的鸭子类型混在一起。使用 Cython，你可以获得混合后的完美组合，只在瓶颈处进行优化，同时在其他所有地方不失去 Python 的美丽。</p><p><img src="/assets/080111_AUJL_2894582.cRmhIDIb.jpg" alt=""></p><p><em>星战前夜的一幅截图：这是用 Python 编写的 space MMO 游戏。</em></p><p>当您最终遇到 Python 的性能问题阻碍时，你不需要把你的整个代码库用另一种不同的语言来编写。你只需要用 Cython 重写几个函数，几乎就能得到你所需要的性能。这就是<a href="https://www.eveonline.com/" target="_blank" rel="noreferrer">星战前夜</a>采取的策略。这是一个大型多玩家的电脑游戏，在整个架构中使用 Python 和 Cython。它们通过优化 C/Cython 中的瓶颈来实现游戏级别的性能。如果这个策略对他们有用，那么它应该对任何人都有帮助。或者，还有其他方法来优化你的 Python。例如，<a href="http://pypy.org/" target="_blank" rel="noreferrer">PyPy</a>是一个 Python 的 JIT 实现，它通过使用 PyPy 替掉 CPython（这是 Python 的默认实现），为长时间运行的应用程序提供重要的运行时改进（如 web 服务器）。</p><p>让我们回顾一下要点：</p><ul><li>优化你最贵的资源。那就是你，而不是计算机。</li><li>选择一种语言/框架/架构来帮助你快速开发（比如 Python）。不要仅仅因为某些技术的快而选择它们。</li><li>当你遇到性能问题时，请找到瓶颈所在。</li><li>你的瓶颈很可能不是 CPU 或者 Python 本身。</li><li>如果 Python 成为你的瓶颈（你已经优化过你的算法），那么可以转向热门的 Cython 或者 C。</li><li>尽情享受可以快速做完事情的乐趣。</li></ul><p>#::相关下载</p><p><a href="http://onlookee.com/?c=Article&amp;a=download&amp;id=14" target="_blank" rel="noreferrer">下载地址 = http://onlookee.com/?c=Article&amp;a=download&amp;id=14</a></p><p>#::theEnd</p></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link prev" href="/Python/Python%202.x%20%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98%E7%BB%88%E6%9E%81%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Previous page</span><span class="title" data-v-1bcd8184>Python 2.x 编码问题终极解决方案</span><!--]--></a></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/Python/Python%20%E7%B1%BB%E5%BA%93%E5%BC%95%E5%85%A5%E6%9C%BA%E5%88%B6.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Next page</span><span class="title" data-v-1bcd8184>Python 类库引入机制</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api-examples.md\":\"CJHnzYT_\",\"index.md\":\"CIZ2Q_pP\",\"markdown-examples.md\":\"C2pQdshC\",\"python_python 2.x 编码问题终极解决方案.md\":\"CcG2jU0T\",\"python_python 哲学.md\":\"CilfTWKF\",\"python_python 学习指南.md\":\"DXmxUcrW\",\"python_python 快与慢.md\":\"Dv7QvExC\",\"python_python 类库引入机制.md\":\"D-LpU4MB\",\"python_python 资源.md\":\"BvJoLqDk\",\"readme.md\":\"D_9Isxw1\",\"欢迎.md\":\"404-pGmS\",\"软件_合集_大全_绝赞软件 - 推荐列表.md\":\"BlFsLdDe\",\"软件_思维导图_mindjet mindmanager - 全球领先思维导图解决方案、思维导图神器.md\":\"Ck-iRW8Q\",\"软件_文件管理_1 - everything - 极速文件搜索神器，快得让人震惊.md\":\"8Gx8OTqo\",\"软件_文件管理_2 - locate32 - 极速文件搜索.md\":\"BFUsvdjG\",\"软件_文件管理_3 - total commander - 神器级别的文件资源管理器.md\":\"DVxizgm5\",\"软件_编程开发_beyond compare 4 - 强大专业的文件比较软件 (文本、代码、文件夹差异对比).md\":\"CM6XTyI6\",\"软件_编程开发_文本编辑器_sublime text - 比肩 vim 兼具 textmate 的现代文本编辑器.md\":\"EWl2_Blv\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"My Awesome Project\",\"description\":\"A VitePress Site\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"search\":{\"provider\":\"local\"},\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Examples\",\"link\":\"/README\"}],\"sidebar\":[{\"text\":\"Python\",\"items\":[{\"text\":\"Python 2.x 编码问题终极解决方案\",\"link\":\"/Python/Python 2.x 编码问题终极解决方案\"},{\"text\":\"Python 快与慢\",\"link\":\"/Python/Python 快与慢\"},{\"text\":\"Python 类库引入机制\",\"link\":\"/Python/Python 类库引入机制\"},{\"text\":\"Python 学习指南\",\"link\":\"/Python/Python 学习指南\"},{\"text\":\"Python 哲学\",\"link\":\"/Python/Python 哲学\"},{\"text\":\"Python 资源\",\"link\":\"/Python/Python 资源\"}]},{\"text\":\"软件\",\"link\":\"\"}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/vuejs/vitepress\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>